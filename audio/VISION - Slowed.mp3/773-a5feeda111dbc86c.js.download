try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="04acb481-9051-4298-a2e7-fb136b936908",e._sentryDebugIdIdentifier="sentry-dbid-04acb481-9051-4298-a2e7-fb136b936908")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{43208:function(e,t,r){r.d(t,{z:function(){return i}});var a=r(97546),n=r(85168);let i=(0,n.forwardRef)((e,t)=>{let{onSelectFiles:r,...i}=e,s=(0,n.useRef)(null);return(0,n.useImperativeHandle)(t,()=>({selectFiles:()=>s.current?.click()}),[]),(0,a.jsx)("input",{...i,hidden:!0,ref:s,type:"file",onChange:e=>{let{target:t}=e,{files:a}=t;if(!a||0===a.length)return null;r(a)}})});i.displayName="HiddenTrackInput"},47094:function(e,t,r){r.r(t),r.d(t,{CheckoutActions:function(){return a.CheckoutActions},CheckoutModal:function(){return a.B},CheckoutModalType:function(){return a.G},PlanPickerType:function(){return a.PlanPickerType}});var a=r(83452)},35261:function(e,t,r){r.r(t),r.d(t,{LocalPlayButton:function(){return l}});var a=r(97546),n=r(31005),i=r(33175),s=r(20197),o=r(54664);let l=e=>{let{LoadingIcon:t=i.LoadingSpinner,PauseIcon:r=i.Pause,PlayIcon:l=i.Play,file:u,fileUrl:c,...d}=e,h=(0,s.useLingua)(),{player:p,play:g,isPlaying:f,isLoading:k}=(0,o.useLocalPlayer)({file:u,fileUrl:c});return(0,a.jsx)(n.default,{"aria-label":f?h.t("Pause"):h.t("Play"),color:"primary",disabled:!c,onClick:e=>{e.preventDefault(),e.stopPropagation(),f?p.pause():g()},...d,children:k?(0,a.jsx)(t,{}):f?(0,a.jsx)(r,{}):(0,a.jsx)(l,{})})}},54664:function(e,t,r){r.r(t),r.d(t,{LocalPlayerProvider:function(){return g},useLocalPlayer:function(){return f}});var a=r(97546),n=r(71368),i=r(23994),s=r(48567),o=r(19061),l=r(36834),u=r(85168),c=r(87770),d=r(7337);let h=["mp3","wav"],p=(0,u.createContext)({isPlaying:!1,isLoading:!1,player:(0,d.d)(),setActiveFile:()=>Promise.reject("Cannot use setActiveFile outside LocalPlayerProvider")}),g=e=>{let{children:t}=e,{convertToWAV:r}=(0,i.A)(),[g,f]=(0,u.useState)(),[k,m]=(0,u.useState)(!1),[y,b]=(0,u.useState)((0,d.d)()),P=(0,c.i)(y),A=(0,u.useCallback)(async e=>{let{file:t,fileUrl:a}=e;y.kill();let i=(0,n.m)(t.name),u=h.includes(i);u||m(!0),f({file:t,fileUrl:a});let c=new o.HTML5Player({url:u?a:await r(t),format:{mimeType:`audio/${u?i:"wav"}`}},{logger:s.logger.noOpLogger});return c.onPlay.subscribe(()=>{l.J.isAudioPlaying()&&l.J.pause()}),b(c),u||m(!1),c},[r,y]),w=(0,u.useMemo)(()=>({player:y,isPlaying:P,isLoading:k,activeFile:g,setActiveFile:A}),[y,P,g,A,k]);return(0,u.useEffect)(()=>()=>{y.kill()},[y]),(0,a.jsx)(p.Provider,{value:w,children:t})},f=e=>{let{file:t,fileUrl:r}=e,{player:a,isPlaying:n,isLoading:i,activeFile:s,setActiveFile:o}=(0,u.useContext)(p),l=!!r&&s?.fileUrl===r,c=async()=>{if(l)a.isDead()||await a.play();else if(t&&r){let e=await o({file:t,fileUrl:r});await e.play()}},d=async e=>{if(l)a.isDead()||await a.seek(e);else if(t&&r){let a=await o({file:t,fileUrl:r});await a.seek(e)}};return{player:a,isPlaying:n&&l,isLoading:i&&l,play:c,seek:d}}},4507:function(e,t,r){r.d(t,{RI:function(){return a.LocalPlayButton},b3:function(){return n.useLocalPlayer}});var a=r(35261),n=r(54664)},773:function(e,t,r){r.d(t,{n6:function(){return M},kJ:function(){return N},JF:function(){return Y},rb:function(){return H},NW:function(){return W}});var a,n,i=r(97546),s=r(90855),o=r(32292),l=r(72115),u=r(38788),c=r(5182),d=r(87506),h=r(67035),p=r(93372),g=r(33175),f=r(20197),k=r(8734),m=r(20796),y=r.n(m);r(37994),r(56904),r(72343),r(60065),r(51688);var b=r(68303);function P(e){let{uploadProgress:t,height:r=8}=e,{isInWebView:a}=(0,b.B9)();return(0,i.jsx)(d.default,{sx:e=>({background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAMklEQVR4AWP838CAAHA2gs+EXxqoAJ80WAFuaagCXNJwBTikEQrwSCOswOcTiILRcAAAsB4Rn0zqTUIAAAAASUVORK5CYII=)",backgroundColor:a?e.vars.palette.background.default:"#E5E5E5",flex:1,flexDirection:"row"}),children:(0,i.jsx)(p.Z,{variant:"determinate",value:t,sx:e=>({height:r,flex:1,backgroundColor:"transparent","& .MuiLinearProgress-bar":{backgroundColor:e.vars.palette.success.main}})})})}var A=r(85168),w=r(10261),x=r(73022),v=r(10690),T=r(69645),S=r(41943),C=r(4507),j=r(47094),E=r(68933),L=r(51558),R=r(43208),I=r(73836);let O=(0,E.default)(()=>Promise.resolve().then(r.bind(r,47094)).then(e=>e.CheckoutModal),{loadableGenerated:{webpack:()=>[47094]}});function U(e){let{file:t,isProgressing:r}=e,{isInWebView:a}=(0,b.B9)(),n=a&&r?(0,i.jsx)(f.Lingua,{t:"Wait! Keep the app open to complete."}):t?.name;return(0,i.jsx)(l.default,{variant:"subtitle1",sx:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n})}function M(e){let{className:t,localId:r,onClickReplace:a}=e,n=(0,A.useRef)(null),[c,d]=(0,A.useState)(!1),h=(0,w.rS)(),p=(0,I.S)(),{isMultiTrackUpload:m,areTracksWithinQuota:x}=(0,s.i2)(),v=(0,w.a)(()=>{h.track("Upload Funnel Component Viewed",{component_id:"Over Quota",component_number:5,is_multi_track:m,is_voice_recorder_visible:!1,view_type:p})}),{getFileByLocalId:T}=(0,s.jX)(),S=T(r),{uploadStatus:C}=S??{uploadStatus:s.Dm.none},E=(0,o.Ln)(C),{isInWebView:L}=(0,b.B9)(),M=!x||(0,o.gO)({uploadStatus:C}),N=S?.uploadStatus===s.Dm.transcodeStarted;return(E||N||M)&&S?(0,i.jsxs)("div",{className:t||"dgdqh40",children:[(0,i.jsxs)("div",{className:y()("dgdqh41",{dgdqh45:M,dgdqh46:!M&&N&&!L,dgdqh47:!M&&N&&L,dgdqh42:x}),children:[M?(0,i.jsx)(g.Info,{className:"dgdqh49",width:24,height:24}):N?(0,i.jsx)(g.CheckmarkCircle,{className:"dgdqh48",width:24,height:24}):null,x?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U,{file:S.file,isProgressing:E}),(N||M)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.z,{multiple:!1,onSelectFiles:e=>{a(e[0])},ref:n}),(0,i.jsx)(u.default,{variant:"text",size:"medium",onClick:()=>{n.current?.selectFiles()},children:(0,i.jsx)(f.Lingua,{t:"Replace track"})})]})]}):(0,i.jsxs)("div",{className:"dgdqh43",ref:v,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(l.default,{variant:"inherit",className:"dgdqh44",children:(0,i.jsx)(f.Lingua,{t:"Over quota"})}),(0,i.jsx)(l.default,{variant:"subtitle1",children:(0,i.jsx)(f.Lingua,{t:"Upgrade to <PlanName />",values:{PlanName:()=>(0,i.jsx)(k.ProductNameLabel,{productId:k.ProductId.CREATOR_SUBSCRIPTION_3,variant:"short"})}})})]}),(0,i.jsx)(u.default,{variant:"contained",color:"primary",size:"small",onClick:()=>{d(!0),h.track("Product View Triggered",{upsell_context:"Upload Limit",view_type:p})},children:(0,i.jsx)(f.Lingua,{t:"Get <PlanName />",values:{PlanName:()=>(0,i.jsx)(k.ProductNameLabel,{productId:k.ProductId.CREATOR_SUBSCRIPTION_3,variant:"short"})}})})]})]}),!N&&!M&&(0,i.jsx)(P,{uploadProgress:S.uploadProgress||0}),(0,i.jsx)(O,{checkoutModalType:j.CheckoutModalType.PURCHASE,config:{isOpen:c,setIsOpen:d,tcode:"t498"}})]}):null}let N=e=>{let{localId:t,onReplaceSelection:r}=e,a=(0,w.rS)(),n=(0,I.S)(),{areTracksWithinQuota:l,isMultiTrackUpload:u}=(0,s.i2)(),{getFileByLocalId:c}=(0,s.jX)(),d=c(t);if(!d)return null;if(!l)return(0,i.jsx)(V,{onEntered:()=>{a.track("Upload Funnel Component Viewed",{component_id:"Over Quota",component_number:5,is_multi_track:u,is_voice_recorder_visible:!1,view_type:n})},onClickUnlock:()=>{a.track("Product View Triggered",{upsell_context:"Upload Limit",view_type:n})}});let h=d.file?.name??d.originalFilename;return(0,o.Ln)(d.uploadStatus)?(0,i.jsx)(z,{trackName:h,uploadProgress:d.uploadProgress}):(0,o.gO)(d)?(0,i.jsx)(q,{track:d,onReplaceSelection:r}):(0,i.jsx)(F,{track:d,onReplaceSelection:r})},_=e=>{let{children:t,timeout:r=500,...a}=e;return(0,i.jsx)(c.Z,{in:!0,timeout:r,unmountOnExit:!0,...a,children:(0,i.jsx)(d.default,{sx:e=>({alignItems:"center",display:"flex",flexDirection:"row",flexShrink:0,gap:e.spacing(1)}),children:t})})},B=e=>{let{name:t,sx:r,...a}=e;return(0,i.jsx)(l.default,{sx:(0,L.jM)({maxWidth:"28ch",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"fit-content"},r),variant:"caption",...a,children:t})},D=e=>{let{onReplaceSelection:t}=e,r=(0,A.useRef)(null);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.default,{size:"medium",variant:"text",onClick:()=>{r.current?.selectFiles()},children:(0,i.jsx)(f.Lingua,{t:"Replace track"})}),(0,i.jsx)(R.z,{multiple:!1,onSelectFiles:e=>{t?.(e[0])},ref:r})]})},F=e=>{let{track:t,onReplaceSelection:r,...a}=e,[n,s]=(0,A.useState)(!1);return(0,i.jsxs)(_,{onEntered:()=>{setTimeout(()=>{s(!0)},2e3)},...a,children:[n?(0,i.jsx)(C.RI,{PauseIcon:x.Z,PlayIcon:v.Z,file:t.file,fileUrl:t.fileUrl,sx:{padding:0}}):(0,i.jsx)(T.Z,{sx:e=>({color:e.vars.palette.success.light})}),(0,i.jsx)(B,{name:t.file?.name??t.originalFilename}),(0,i.jsx)(D,{onReplaceSelection:r})]})},q=e=>{let{track:t,onReplaceSelection:r,...a}=e;return(0,i.jsxs)(_,{...a,children:[(0,i.jsx)(S.Z,{sx:e=>({color:e.vars.palette.error.light})}),(0,i.jsx)(B,{name:t.file?.name??t.originalFilename}),(0,i.jsx)(D,{onReplaceSelection:r})]})},V=e=>{let{onClickUnlock:t,...r}=e,[a,n]=(0,A.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(_,{...r,children:[(0,i.jsx)(S.Z,{sx:e=>({color:e.vars.palette.error.light})}),(0,i.jsx)(l.default,{variant:"caption",sx:e=>({color:e.vars.palette.error.light}),children:(0,i.jsx)(f.Lingua,{t:"You've reached your upload limit."})}),(0,i.jsx)(u.default,{size:"medium",variant:"text",onClick:()=>{n(!0),t()},children:(0,i.jsx)(f.Lingua,{t:"Unlock with <PlanName />",values:{PlanName:()=>(0,i.jsx)(k.ProductNameLabel,{productId:k.ProductId.CREATOR_SUBSCRIPTION_3,variant:"short"})}})})]}),(0,i.jsx)(O,{checkoutModalType:j.CheckoutModalType.PURCHASE,config:{isOpen:a,setIsOpen:n,tcode:"t498"}})]})},z=e=>{let{trackName:t,uploadProgress:r,...a}=e;return(0,i.jsxs)(_,{...a,children:[(0,i.jsx)(B,{name:t}),(0,i.jsx)(h.default,{sx:{background:"#DDDDDD url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAAAECAYAAACeP1FKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEKSURBVHgBldQhEoJAFAbgxwzBYCASOYIH8ABEI5FoMBg5gMFo8AAcgAMQCYaNRI9ANBho+N7IOsz6/h12Z97suOu3D9/KiwiMaZr2PJ040sXywFFHUdQCs+OpUkzDpgEm4+nAkSyWR46OjfGY3MkjxrDpAgzNeZBJ52cLNZInW2ticJAt5tbZkgRvj7kAMwCT8VRwbJwt+fwCJvGYMdDQCpMo29o5dgSbWEkuxbwp35XiX/k2H4GmBkYetFSMfQuewJw9xgSa3mNK+i+mNa1ipMhH0i/AeEwRO4vSgirlENuGtGIiIxdwB8kz+v5j3CE/smXTA5MDY0AxkSECrWvRgpJAk1PYBfza1geIzZh6HCCqhAAAAABJRU5ErkJggg==)",borderRadius:4,display:"inline-flex"},children:(0,i.jsx)(p.Z,{value:r,variant:"determinate",sx:e=>({backgroundColor:"transparent",borderTopLeftRadius:4,borderBottomLeftRadius:4,height:4,width:150,"& .MuiLinearProgress-bar":{backgroundColor:e.vars.palette.success.main}})})}),(0,i.jsx)(l.default,{variant:"caption",children:(0,i.jsx)(f.Lingua,{t:"Uploading [[progress]]%",values:{progress:r.toFixed(0)}})})]})};var G=r(84443);(a=n||(n={})).Transcoding="transcoding",a.Uploading="uploading";let H=e=>null!==e.progress&&e.progress<100,W=e=>{let{uploadFiles:t}=(0,s.i2)();return(e&&(t=t.filter(t=>t.urn===e)),t.length<1)?{progress:null,status:null}:t.reduce((e,r)=>({progress:e.progress+r.uploadProgress/t.length,status:(0,o.Ln)(r.uploadStatus)?"uploading":"transcoding",trackCount:e.trackCount,hasUploadError:e.hasUploadError||(0,o.gO)(r)}),{progress:0,status:"uploading",trackCount:t.length,hasUploadError:!1})},Y=e=>{let{children:t,uploadStatus:r,forceOpen:a}=e,s=Math.floor(r.progress);return(0,i.jsx)(G.T,{arrow:!0,head:r.status===n.Uploading?(0,i.jsx)(f.Lingua,{t:"Uploading track ... [[progress]]%",tp:"Uploading tracks ... [[progress]]%",count:r.trackCount,values:{progress:s},comment:"Status message for uploading a track"}):(0,i.jsx)(f.Lingua,{t:"Processing track ... [[progress]]%",tp:"Processing tracks ... [[progress]]%",count:r.trackCount,values:{progress:s},comment:"Status message for processing a track"}),body:(0,i.jsx)(f.Lingua,{t:"Once this upload is complete, you can upload more tracks."}),placement:"bottom",open:a,children:t})}},49879:function(e,t,r){r.d(t,{V:function(){return i}});var a=r(36570);class n{static #e=this.UNAVAILABILITY_TIME_MS=3e4;constructor(){this.subscribers=new Set,this.unavailableTracks=new Set,this.v2PlaybackState={isPlayable:!0,isPlaying:!1,isLoading:!1,isMuted:!1,volume:1,lastUpdate:0,playbackPosition:0},this.currentTrack=null,this.frame=null}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}syncV2PlaybackState(e){this.v2PlaybackState=e,this.notifySubscribers(),this.notifySubscribersOnFrame()}setCurrentTrack(e){this.currentTrack=e,this.notifySubscribers()}playTracks(e,t){let r=t?e.find(e=>e.urn===t):e[0];if(!r)throw Error("Start track not found in play source.");return a.y.sendMessageToV2({kind:"play-track-urn",trackUrn:r.urn})}playNext(){return Promise.resolve()}play(){return a.y.sendMessageToV2({kind:"play"})}pause(){return a.y.sendMessageToV2({kind:"pause"})}seek(e){return this.doOptimisticUpdateForPlaybackPosition(e),a.y.sendMessageToV2({kind:"seek",time:e})}getElapsedTime(e){return e&&e.urn!==this.currentTrack?.urn?0:this.v2PlaybackState.isPlaying?Math.min(this.v2PlaybackState.playbackPosition+(Date.now()-this.v2PlaybackState.lastUpdate),this.getDuration()):this.v2PlaybackState.playbackPosition}getDuration(e){return(e??this.getCurrentTrack())?.fullDuration??0}getCurrentTrack(){return this.currentTrack}isTrackPlayable(e){return!!(e??=this.getCurrentTrack())&&this.v2PlaybackState.isPlayable}isAudioPlayable(){return this.v2PlaybackState.isPlayable}isTrackPlaying(e){return e??=this.currentTrack,e?.urn===this.currentTrack?.urn&&this.v2PlaybackState.isPlaying}isAudioPlaying(){return this.v2PlaybackState.isPlaying}isTrackLoading(e){return e??=this.currentTrack,e?.urn===this.currentTrack?.urn&&this.v2PlaybackState.isLoading}isAudioLoading(){return this.v2PlaybackState.isLoading}isTrackTemporarilyUnavailable(e){return!!(e??=this.currentTrack)&&this.unavailableTracks.has(e.urn)}getVolume(){return this.v2PlaybackState.volume}setVolume(e){return a.y.sendMessageToV2({kind:"adjust-volume",volume:e})}isMuted(){return this.v2PlaybackState.isMuted}setMuted(e){return a.y.sendMessageToV2({kind:"set-muted",muted:e})}setAuthToken(e){}setAudioReporter(e){}setAudioPerformanceReporter(e){}setAudioErrorReporter(e){}setSupportedDrmProtocols(e){}doOptimisticUpdateForPlaybackPosition(e){this.v2PlaybackState.playbackPosition=e,this.v2PlaybackState.lastUpdate=Date.now(),this.notifySubscribers()}notifySubscribersOnFrame(){let e=()=>{this.notifySubscribers(),this.frame=window.requestAnimationFrame(e)};this.v2PlaybackState.isPlaying?(()=>{null===this.frame&&(this.frame=window.requestAnimationFrame(e))})():(()=>{null!==this.frame&&(window.cancelAnimationFrame(this.frame),this.frame=null)})()}notifySubscribers(){this.subscribers.forEach(e=>{e()})}}let i=new n},36834:function(e,t,r){r.d(t,{J:function(){return d}});var a=r(36570),n=r(49879),i=r(27229),s=r(35283),o=r(40554);class l{constructor(){this.tracks=[],this.index=0}setTracks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tracks=[...e],this.index=t}getTracks(){return[...this.tracks]}getCurrentTrack(){return this.tracks[this.index]??null}getPreviousTrack(){return this.tracks[this.index-1]??null}getNextTrack(){return this.tracks[this.index+1]??null}back(){this.getPreviousTrack()&&this.index--}forward(){this.getNextTrack()&&this.index++}}class u{static #e=this.UNAVAILABILITY_TIME_MS=3e4;constructor(){this.subscribers=new Set,this.players=new Map,this.unavailableTracks=new Set,this.queue=new l}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}async playTracks(e,t){let r=t?e.find(e=>e.urn===t):e[0];if(!r)throw Error("Start track not found in play source.");this.prepareCurrentTrackChange(r),this.queue.setTracks(e,e.indexOf(r)),await this.play()}async playNext(){this.queue.getNextTrack()&&(this.prepareCurrentTrackChange(this.queue.getNextTrack()),this.queue.forward(),await this.play())}async play(){let e=this.getCurrentPlayer(!0);if(!e)throw Error("Cannot play – no player exists for current track.");e.isEnded()&&e.seek(0),await e.play()}async pause(){let e=this.getCurrentPlayer(!0);if(!e)throw Error("Cannot pause – no player exists for current track.");await e.pause()}async seek(e){let t=this.getCurrentPlayer(!0);if(!t)throw Error("Cannot seek – no player exists for current track.");await t.seek(e)}getElapsedTime(e){let t=e?this.getPlayer(e):this.getCurrentPlayer();return!t||t.isEnded()?0:t.getPosition()}getDuration(e){let t=e?this.getPlayer(e):this.getCurrentPlayer();return t?.getDuration()??(e??this.getCurrentTrack())?.fullDuration??0}getCurrentTrack(){return this.queue.getCurrentTrack()}isTrackPlayable(e){let t=e?this.getPlayer(e):this.getCurrentPlayer();return e??=this.getCurrentTrack(),!t?.isDead()&&!this.isTrackTemporarilyUnavailable(e)&&!!e&&(0,o.WL)(e)}isAudioPlayable(){return this.isTrackPlayable()}isTrackPlaying(e){let t=e?this.getPlayer(e):this.getCurrentPlayer();return t?.isPlaying()??!1}isTrackEnded(e){let t=e?this.getPlayer(e):this.getCurrentPlayer();return t?.isEnded()??!1}isAudioPlaying(){return this.isTrackPlaying()}isTrackLoading(e){let t=e?this.getPlayer(e):this.getCurrentPlayer();return t?.isLoading()??!1}isAudioLoading(){return this.isTrackLoading()}isTrackTemporarilyUnavailable(e){return!!(e??=this.getCurrentTrack())&&this.unavailableTracks.has(e.urn)}getVolume(){return(0,i.getGlobalVolume)()}setVolume(e){(0,i.setGlobalVolume)(e),this.notifySubscribers()}isMuted(){return(0,i.getGlobalMuted)()}setMuted(e){(0,i.setGlobalMuted)(e),this.notifySubscribers()}setAuthToken(e){this.authToken=e}setAudioReporter(e){this.audioReporter=e}setAudioPerformanceReporter(e){this.audioPerformanceReporter=e}setAudioErrorReporter(e){this.audioErrorReporter=e}setSupportedDrmProtocols(e){this.supportedDrmProtocols=e}getCurrentPlayer(e){let t=this.queue.getCurrentTrack();return t?this.getPlayer(t,e):null}getPlayer(e,t){let r=this.players.get(e.urn);if((!r||r.isDead())&&t){if(this.unavailableTracks.has(e.urn))return null;try{r=(0,s.E)(e,{authToken:this.authToken,audioReporter:this.audioReporter,audioPerformanceReporter:this.audioPerformanceReporter,audioErrorReporter:this.audioErrorReporter,supportedDrmProtocols:this.supportedDrmProtocols})}catch(t){throw this.makeTrackUnavailable(e),t}this.players.set(e.urn,r),this.notifySubscribersOnPlayerChange(e),this.notifySubscribersOnFrame(e),this.handleTrackEnd(e),this.handlePlayerDeath(e)}return r??null}notifySubscribersOnPlayerChange(e){this.getPlayer(e).onChange.subscribe(()=>{this.notifySubscribers()})}notifySubscribersOnFrame(e){let t=this.getPlayer(e),r=null,a=()=>{null===r&&(r=window.requestAnimationFrame(i))},n=()=>{null!==r&&(window.cancelAnimationFrame(r),r=null)},i=()=>{this.notifySubscribers(),r=window.requestAnimationFrame(i)};t.onChange.subscribe(e=>{!0===e.actuallyPlaying?a():!1===e.actuallyPlaying&&n()})}handleTrackEnd(e){let t=this.getPlayer(e);t.onEnded.subscribe(()=>{t.pause(),this.playNext()})}handlePlayerDeath(e){this.getPlayer(e).onChange.subscribe(t=>{t.dead&&(this.players.delete(e.urn),t.fatalError&&this.makeTrackUnavailable(e))})}makeTrackUnavailable(e){this.unavailableTracks.add(e.urn),this.notifySubscribers(),window.setTimeout(()=>{this.unavailableTracks.delete(e.urn),this.notifySubscribers()},u.UNAVAILABILITY_TIME_MS)}prepareCurrentTrackChange(e){this.getCurrentTrack()?.urn!==e.urn&&this.getCurrentPlayer()?.kill()}notifySubscribers(){this.subscribers.forEach(e=>{e()})}}let c=new u,d=(0,a.x)()?n.V:c},40554:function(e,t,r){r.d(t,{$b:function(){return l},I7:function(){return o},IL:function(){return n},OF:function(){return i},WL:function(){return u},zn:function(){return s}});var a=r(91227);function n(e){return!e.transcodings||0===e.transcodings.length}function i(e){return e.disabledReason!==a.h8e.ENABLED}function s(e){return e.authorization?.policy==="BLOCK"}function o(e){return e.authorization?.policy==="SNIP"}function l(e){return e.authorization?.monetizationModel==="SUB_HIGH_TIER"}function u(e){return!n(e)&&!i(e)&&!s(e)&&!o(e)}},35283:function(e,t,r){r.d(t,{E:function(){return k}});var a=r(27229),n=r(48567),i=r(50158),s=r(8636),o=r(19061),l=r(72553),u=r(20246),c=r(95802),d=r(40554),h=r(86321);let p=n.logger.noOpLogger,g=e=>(e??[]).map(e=>({duration:e?.durationMs,format:{mime_type:e?.format?.mimeType,protocol:e?.format?.protocol},quality:e?.quality,url:`${h.OB.TRANSCODINGS_DOMAIN}${e?.relativeUrl}`,snipped:e?.snipped,preset:e?.preset})),f={request(e){let t=new URL(e.url);return h.OB.API_WEB_STAGE_KEY&&t.searchParams.set("stage",h.OB.API_WEB_STAGE_KEY),e.url=t.toString(),s.stringLoader.request(e)}};function k(e,t){let r=new o.MediaElementManager("audio",p),n={streamUrlRetriever:new i.StreamUrlRetriever({loader:f,clientId:h.OB.CLIENT_ID,trackId:Number((0,c.K)(e.urn).id),requestAuthorization:t.authToken?`OAuth ${t.authToken}`:null,mediaPayload:{transcodings:g(e.transcodings)},secretToken:e.secretToken}),controllers:[new u.HLSMSEPlayerController(r),new o.HTML5PlayerController(r)],getURLOpts:{snippet:(0,d.I7)(e),qualities:[a.Quality.SQ]},streamUrlsExpire:!0,duration:e.fullDuration,fadeOnPauseAndPlay:!0,fadeOnSeek:!0,pausedMaxBufferLength:15e3,playingMaxBufferLength:3e5,audioReporter:r=>{t.audioReporter?.(e,r)},audioPerformanceReporter:r=>{t.audioPerformanceReporter?.(e,r)},errorReporter:r=>{t.audioErrorReporter?.(e,r)},audioCheckpointInterval:1e3,logger:p,fetchEnabled:!0,preloadingEnabled:!0};return t.supportedDrmProtocols&&t.supportedDrmProtocols.length>0&&n.controllers.push(new l.HLSJSPlayerController(r,t.supportedDrmProtocols,h.OB.DRM_LICENSE_URI)),new a.Player(n)}},7337:function(e,t,r){r.d(t,{d:function(){return s}});var a=r(48567),n=r(19061),i=r(86321);let s=()=>{if((0,i.Y8)())return null;let e=new n.HTML5Player({format:{},url:""},{logger:a.logger.noOpLogger});return e.kill(),e}},95802:function(e,t,r){r.d(t,{K:function(){return a}});function a(e){let[t,r,...a]=e.split(":");return{namespace:t,collection:r,id:a.join(":")}}},23994:function(e,t,r){r.d(t,{A:function(){return h}});var a=r(92579),n=r(88869),i=r(85168),s=r(71368),o=r(86321);let l=(0,o.yG)()?"/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.wasm":`${o.OB.ASSETS_HOST}/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.wasm`,u=(0,o.yG)()?"/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.js":`${o.OB.ASSETS_HOST}/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.js`,c=(0,o.yG)()?"/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.worker.js":`${o.OB.ASSETS_HOST}/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.worker.js`,d="output.wav";function h(){let[e,t]=(0,i.useState)(!1),r=(0,i.useRef)("undefined"!=typeof document?new a.C:null),o=async()=>{if(e)return;let[a,i,s]=await Promise.all([(0,n.Wn)(u,"text/javascript"),(0,n.Wn)(l,"application/wasm"),(0,n.Wn)(c,"text/javascript")]);await r.current?.load({coreURL:a,wasmURL:i,workerURL:s,classWorkerURL:s}),t(!0)};return{convertToWAV:async e=>{await o();let t=(0,s.m)(e.name),a=await (0,n.dc)(e),i=`input.${t}`;await r.current?.writeFile(i,a),await r.current?.exec(["-i",i,d]);let l=await r.current?.readFile(d);return URL.createObjectURL(new Blob([l],{type:"audio/wav"}))},normalize:async(e,t)=>{await o();let a=`input.${t}`,i=`output.${t}`;return await r.current?.writeFile(a,await n.dc(e)),"webm"===t?await r.current?.exec(["-i",a,"-c:a","libvorbis","-filter:a","loudnorm",i]):await r.current?.exec(["-i",a,"-filter:a","loudnorm",i]),new Blob([await r.current?.readFile(i)],{type:`audio/${t}`})},concat:async(e,t)=>{await o();let a="",i=0;for(let s of e){let e=`file-${i}.${t}`,o=`file-${i}.wav`;await r.current?.writeFile(e,await n.dc(s)),await r.current?.exec(["-i",e,o]),a+=`file '/${o}'
`,i++}let s="filelist.txt",l="combined.wav";return await r.current?.writeFile(s,a),await r.current?.exec(["-f","concat","-safe","0","-i",s,"-c","copy",l]),new Blob([await r.current?.readFile(l)],{type:"audio/wav"})}}}},87770:function(e,t,r){r.d(t,{i:function(){return n}});var a=r(85168);let n=e=>{let[t,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=e.onPlay.subscribe(()=>{r(!0)}),a=e.onPause.subscribe(()=>{r(!1)}),n=e.onChange.subscribe(e=>{e.dead&&r(!1)});return()=>{t.remove(),a.remove(),n.remove()}},[e]),t}}}]);