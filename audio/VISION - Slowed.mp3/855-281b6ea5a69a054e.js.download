try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="29b4f7a8-ba82-455a-a919-44a17e7d355f",e._sentryDebugIdIdentifier="sentry-dbid-29b4f7a8-ba82-455a-a919-44a17e7d355f")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[855],{32880:function(e,t,n){var a,r;n.d(t,{c:function(){return a},g:function(){return o}}),(r=a||(a={})).StartPage="StartPage",r.IsExplicit="IsExplicit",r.CheckboxQuestions="CheckboxQuestions",r.UploadDocumentation="UploadDocumentation",r.HasISRC="HasISRC",r.EnterISRC="EnterISRC",r.ArtistAndLegalName="ArtistAndLegalName",r.Success="Success";let o={StartPage:{progress:0,next:"IsExplicit"},IsExplicit:{progress:1/6,previous:"StartPage",next:"ArtistAndLegalName"},ArtistAndLegalName:{progress:2/6,previous:"IsExplicit",next:"HasISRC"},HasISRC:{progress:.5,previous:"ArtistAndLegalName",next:{yes:"EnterISRC",no:"CheckboxQuestions"}},EnterISRC:{progress:3.5/6,previous:"HasISRC",next:"CheckboxQuestions"},CheckboxQuestions:{progress:4/6,previous:{requestedAutogenerateISRC:"HasISRC",manuallyEnteredISRC:"EnterISRC"},next:{oneOrMoreBoxesChecked:"UploadDocumentation",noBoxesChecked:"Success"}},UploadDocumentation:{progress:5/6,previous:"CheckboxQuestions",next:"Success"},Success:{progress:1,previous:"UploadDocumentation"}}},67431:function(e,t,n){n.d(t,{MonetizationProvider:function(){return h},o:function(){return b},l:function(){return v}});var a=n(97546),r=n(32880),o=n(85168),i=n(65115),l=n(15926);let s=l.z.object({artistName:l.z.string(),composerName:l.z.string()}),u=l.z.object({key:l.z.string(),bucket:l.z.string()}),d=l.z.object({hasISRC:l.z.boolean().optional(),isrc:l.z.literal("").or(i.b.nullable().optional()),licenseDocumentation:u.optional(),contributor:s.optional(),explicitLabel:l.z.boolean().optional(),isCover:l.z.boolean().optional(),isRemix:l.z.boolean().optional(),usedSamples:l.z.boolean().optional(),usedAI:l.z.boolean().optional(),isSongWriter:l.z.boolean().optional(),label:l.z.string().optional()}).superRefine((e,t)=>{let{hasISRC:n,isrc:a}=e;n&&!a?.length&&t.addIssue({code:l.z.ZodIssueCode.custom,path:["isrc"],message:"required"})}).transform(e=>{let{usedAI:t,hasISRC:n,...a}=e;return a}),c=l.z.object({monetizationRequests:l.z.record(d)}),p={isrc:null,licenseDocumentation:{key:"",bucket:""},contributor:{artistName:"",composerName:""},explicitLabel:!1,isCover:!1,isRemix:!1,usedSamples:!1,usedAI:!1,isSongWriter:!1,label:"",hasISRC:!1};var m=n(98418),g=n(11563);let f=(0,o.createContext)({requests:{},goToStep:()=>{},setMonetizationFormComplete:()=>{},setMonetizationFormValues:()=>{},setTrackUid:()=>{},addRequest:()=>{},removeRequest:()=>{},monetizationFormMethods:null}),h=e=>{let{children:t}=e,[n,i]=(0,o.useState)({}),l=(0,m.cI)({resolver:(0,g.F)(c,{}),mode:"onSubmit"}),{setValue:s}=l,u=(0,o.useCallback)(e=>{s(`monetizationRequests.${e}`,p),i(t=>({...t,[e]:{monetizationFormComplete:!1,currentStep:r.c.StartPage,trackUid:"",monetizationFormValues:p}}))},[]);return(0,a.jsx)(f.Provider,{value:{requests:n,addRequest:u,goToStep:(e,t)=>{i(n=>({...n,[e]:{...n[e],currentStep:t}}))},setMonetizationFormComplete:(e,t)=>{i(n=>({...n,[e]:{...n[e],monetizationFormComplete:t}}))},setMonetizationFormValues:(e,t)=>{i(n=>({...n,[e]:{...n[e],monetizationFormValues:t}}))},setTrackUid:(e,t)=>{i(n=>({...n,[e]:{...n[e],trackUid:t}}))},monetizationFormMethods:l,removeRequest:e=>{i(t=>Object.fromEntries(Object.entries(t).filter(t=>{let[n]=t;return n!==e})))}},children:t})},b=()=>(0,o.useContext)(f),v=()=>(0,m.Gc)()},2689:function(e,t,n){n.d(t,{T:function(){return p}});var a=n(97546),r=n(85168),o=n(62956),i=n(44538),l=n(87771),s=n(20197),u=n(2619),d=n(8734),c=n(83452);let p=()=>{let{meUser:e}=(0,u.a)(),[t,n]=(0,r.useState)(!1),p=(0,d.useProductName)(),m=(0,o.xw)(e);return{onPlanPickerSeen:(0,r.useCallback)(()=>{switch(m){case c.PlanPickerType.FIRST_UPLOAD:(0,o.WB)(o.hH.FIRST_UPLOAD);break;case c.PlanPickerType.THIRD_UPLOAD:(0,o.WB)(o.hH.THIRD_UPLOAD)}},[m]),onFreePlanSelected:(0,r.useCallback)(()=>{l.Am.primary((0,a.jsx)(s.Lingua,{t:"You picked [[planName]]. Great choice! Now back to uploading.",values:{planName:p.getNameVariants(i.xC.CREATOR_SUBSCRIPTION_FREE).short}}))},[p]),isCheckoutModalOpen:t,setIsCheckoutModalOpen:n,planPickerType:m}}},81736:function(e,t,n){n.d(t,{f:function(){return K},i:function(){return X}});var a,r,o=n(97546),i=n(85168);let l=e=>new Promise((t,n)=>{let a=new FileReader;a.onload=e=>{let a=e.target?.result;a?"string"==typeof a?t(a):t(btoa(String.fromCharCode(...Array.from(new Uint8Array(a))))):n(null)},a.onerror=e=>{n(e)},a.readAsDataURL(e)}),s=async e=>{try{let t=await fetch(e);if(!t.ok)throw Error(`Failed to fetch image from ${e}`);let n=await t.blob();return await l(n)}catch(e){throw Error("Failed to convert image",{cause:e})}};var u=n(76987),d=n(67035);n(37994),n(56904),n(72343),n(60065),n(50854);var c="_11blhfe2",p="_11blhfe1",m="_11blhfee",g=n(33175),f=n(20197),h=n(20796),b=n.n(h);let v=e=>{let{className:t,error:n,openFilePicker:a,size:r="large"}=e,i=(0,f.useLingua)();return(0,o.jsx)("button",{className:b()(t,"large"===r?c:p),onClick:a,"aria-label":i.t("Add artwork"),type:"button",children:(0,o.jsxs)("div",{className:"_11blhfeg",children:[(0,o.jsxs)("div",{className:b()("_11blhfef _11blhfe3",{_11blhfeh:!!n}),children:[(0,o.jsx)(g.MissingImage,{className:"_11blhfe6"}),(0,o.jsx)("label",{htmlFor:"fileInput",children:(0,o.jsx)(d.default,{component:"span",sx:{display:{xs:"none",sm:"inline"}},className:"_11blhfel",children:(0,o.jsx)(f.Lingua,{t:"Add new artwork"})})}),n&&(0,o.jsx)(d.default,{sx:{display:{xs:"none",sm:"block"}},className:"_11blhfej _11blhfei",children:n})]}),n&&(0,o.jsx)(d.default,{sx:{display:{xs:"block",sm:"none"}},className:"_11blhfek _11blhfei",children:n})]})})};var S=n(87662),x=n(87506),E=n(82044),I=n(871),z=n(18599),y=n.n(z),C=n(31005),k=n(33961),A=n(38788),R=n(85797),w=n(23999),F=n(92364),U=n(73090),j=n(20213),D=n(53521);let T=(0,i.forwardRef)((e,t)=>{let{children:n,mode:a,...r}=e;return(0,o.jsx)(j.D,{hoverClass:"_11blhfe7",children:(0,o.jsx)(C.default,{...r,size:"medium",color:"secondary",variant:"compact"===a?"outlined":"contained",ref:t,sx:e=>({"&:hover":{backgroundColor:e.vars.palette.secondary.light}}),children:n})})});T.displayName="OverlayIconButtonWithoutTooltip";let L=e=>{let{tooltipBody:t,...n}=e;return(0,o.jsx)(k.Z,{title:t,arrow:!0,placement:"bottom",children:(0,o.jsx)(T,{...n})})},_=e=>{let{onRemove:t,onReplace:n}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(D.v,{button:(0,o.jsx)(A.default,{variant:"contained",color:"primary",size:"small",className:"_11blhfe8",onClick:n,children:(0,o.jsx)(f.Lingua,{t:"Edit image"})}),anchorOrigin:{horizontal:"center",vertical:"bottom"},transformOrigin:{horizontal:"center",vertical:"top"},children:()=>(0,o.jsxs)(R.Z,{children:[(0,o.jsxs)(w.Z,{onClick:n,children:[(0,o.jsx)(F.Z,{children:(0,o.jsx)(g.MissingImage,{className:"_11blhfeb",height:24,width:24})}),(0,o.jsx)(U.Z,{children:(0,o.jsx)(f.Lingua,{t:"Replace image"})})]}),(0,o.jsxs)(w.Z,{onClick:t,children:[(0,o.jsx)(F.Z,{children:(0,o.jsx)(g.DeleteIcon,{className:"_11blhfec",height:24,width:24})}),(0,o.jsx)(U.Z,{children:(0,o.jsx)(f.Lingua,{t:"Remove image"})})]})]})})})},N=e=>{let{onRemove:t,onReplace:n,mode:a}=e,r=(0,f.useLingua)(),i=(0,S.Z)(e=>e.breakpoints.down("sm"));return(0,o.jsx)(o.Fragment,{children:i?(0,o.jsx)(_,{onRemove:t,onReplace:n}):"compact"===a?(0,o.jsxs)("div",{className:"_11blhfe9",children:[(0,o.jsx)(L,{tooltipBody:(0,o.jsx)(f.Lingua,{t:"Replace image"}),onClick:n,"aria-label":r.t("Replace image"),mode:a,children:(0,o.jsx)(g.EditIcon,{})}),(0,o.jsx)(L,{tooltipBody:(0,o.jsx)(f.Lingua,{t:"Remove image"}),onClick:t,"aria-label":r.t("Remove image"),mode:a,children:(0,o.jsx)(g.DeleteIcon,{height:16,width:16})})]}):(0,o.jsxs)("div",{className:"_11blhfea",children:[(0,o.jsx)(L,{tooltipBody:(0,o.jsx)(f.Lingua,{t:"Replace image"}),onClick:n,"aria-label":r.t("Replace image"),mode:a,children:(0,o.jsx)(g.EditIcon,{})}),(0,o.jsx)(L,{tooltipBody:(0,o.jsx)(f.Lingua,{t:"Remove image"}),onClick:t,"aria-label":r.t("Remove image"),mode:a,children:(0,o.jsx)(g.DeleteIcon,{height:24,width:24})})]})})},P={x:.5,y:.5},M=e=>{let{onImageReady:t,image:n,onRemoveClick:a,onReplaceClick:r,onEdit:l,overlayMode:s}=e,u=(0,i.useRef)(),[c,p]=(0,i.useState)(1),[g,h]=(0,i.useState)(P),b=(0,i.useRef)(null),v=(0,f.useLingua)(),[z,C]=(0,i.useState)(!1),k=(0,S.Z)(e=>e.breakpoints.down("md")),A=()=>b.current?.getImageScaledToCanvas().toDataURL("image/png"),R=(0,o.jsxs)("div",{className:"_11blhfe4 _11blhfe3",children:[(0,o.jsxs)(d.default,{onMouseEnter:()=>{k||C(!0)},onMouseLeave:()=>{C(!1)},sx:{display:"flex",borderRadius:"8px"},children:[(0,o.jsx)(y(),{ref:b,className:"_11blhfe5",image:n,scale:c,height:500,width:500,position:g,style:{height:"100%",width:"100%"},onPositionChange:e=>{h(e)},onImageChange:()=>{let e=A();e&&e!==u.current&&(u.current=e,l(e))},onImageReady:()=>{let e=A();e&&(u.current=e,t(e))}}),(0,o.jsx)(N,{onRemove:a,onReplace:r,mode:s})]}),z&&(0,o.jsx)(d.default,{sx:e=>({position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:e.vars.palette.overlay.main,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",width:"100%",height:"100%"})})]});return(0,o.jsxs)("div",{children:[R,(0,o.jsxs)(x.default,{direction:"row",sx:{display:{xs:"none",sm:"flex"}},className:"_11blhfed",children:[(0,o.jsx)(I.Minus,{className:m,height:24,width:24}),(0,o.jsx)(E.ZP,{min:1,max:3,step:.01,value:c,onChange:(e,t)=>{"number"==typeof t&&p(t)},"aria-label":v.t("Artwork scale")}),(0,o.jsx)(I.Plus,{className:m,height:24,width:24})]})]})},O=e=>{let{image:t,className:n,onRemove:a,onEdit:r,onImageReady:i,openFilePicker:l,size:s="large"}=e;return(0,o.jsx)("div",{className:b()(n,"large"===s?c:p),children:(0,o.jsx)(M,{onReplaceClick:l,onRemoveClick:a,image:t,onEdit:r,onImageReady:i,overlayMode:"large"===s?"standard":"compact"})})};var B=n(42427);(a=r||(r={})).Delete="DELETE",a.Edit="EDIT",a.Ready="READY",a.Replace="REPLACE",a.Reset="RESET",a.SetInitial="SET_INITIAL";let Z=(e,t)=>{switch(t.type){case"DELETE":return{...e,original:null,processed:null,edited:null,isDirty:!!e.initial};case"EDIT":return{...e,edited:t.payload.dataUrl,isDirty:!0};case"READY":return{...e,processed:t.payload.dataUrl};case"REPLACE":return{...e,original:t.payload.dataUrl,processed:null,edited:null,isDirty:!0};case"RESET":return V;case"SET_INITIAL":return{...e,initial:t.payload.dataUrl,original:t.payload.dataUrl};default:return e}},V={initial:null,original:null,processed:null,edited:null,isDirty:!1},W=e=>({type:"EDIT",payload:e}),q=e=>({type:"READY",payload:e}),G=e=>({type:"REPLACE",payload:e}),$=()=>({type:"DELETE"}),Q=e=>({type:"SET_INITIAL",payload:e}),H=()=>({type:"RESET"}),Y=()=>(0,i.useReducer)(Z,V),K=e=>{let{image:t,className:n,error:a,onImageReady:r,onReplace:s,onEdit:d,onRemove:c,size:p="large",...m}=e,g=(0,i.useRef)(null),f=e=>{e.stopPropagation(),e.preventDefault(),g.current&&g.current.click()};return(0,o.jsxs)(o.Fragment,{children:[(!t||a)&&(0,o.jsx)(v,{className:n,error:a,size:p,openFilePicker:f}),t&&(0,o.jsx)(O,{image:t,className:n,onImageReady:r,onEdit:d,onRemove:c,openFilePicker:f,size:p,...m}),(0,o.jsx)("input",{"data-testid":"file-input",id:"fileInput",ref:g,type:"file",accept:"image/jpeg, image/png, image/gif",onChange:e=>{let{files:t}=e.target;t&&t.length>0&&l(t[0]).then(s).catch(e=>{e&&(console.error(e),(0,u.Tb)(e))})},hidden:!0,"aria-hidden":"true",multiple:!1},t??"empty-artwork")]})},X=function(){let{size:e=B.ImageSize.Square200,url:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,a]=Y(),{edited:r,initial:o,isDirty:l,original:d,processed:c}=n;(0,i.useEffect)(()=>{t&&s((0,B.getImageUrl)(t,e)).then(e=>{a(Q({dataUrl:e}))}).catch(u.Tb)},[a,e,t]);let p=(0,i.useMemo)(()=>({isDirty:l,original:d}),[l,d]);return{...(0,i.useMemo)(()=>({onImageReady:e=>{a(q({dataUrl:e}))},onEdit:e=>{a(W({dataUrl:e}))},onRemove:()=>{a($())},onReplace:e=>{a(G({dataUrl:e}))},reset:()=>{a(H())}}),[a]),artwork:p,getArtworkUrl:()=>o&&!l?o:r??c}}},20213:function(e,t,n){n.d(t,{D:function(){return s}});var a=n(68678),r=n(11417),o=n(20796),i=n.n(o),l=n(85168);let s=e=>{let{children:t,hoverClass:n,hoverConfig:o={}}=e,{isHovered:s,hoverProps:u}=(0,a.X)(o),d=l.Children.only(t);return l.cloneElement(d,(0,r.d)(d.props,u,{className:i()(d.props.className,{[n]:s})}))}},53521:function(e,t,n){n.d(t,{v:function(){return h}});var a=n(97546),r=n(85168),o=n(46198),i=n(85797);let l="desktop-menu-button",s="desktop-menu",u=e=>{let{children:t,button:n,onClose:u,onClick:d,...c}=e,p=(0,r.useRef)(null),[m,g]=(0,r.useState)(!1),f=(0,r.cloneElement)(n,{ref:p,onClick:e=>{n.props.onClick?.(e),g(!0)},id:l,"aria-haspopup":"true","aria-controls":m?s:void 0,"aria-expanded":m?"true":void 0});return(0,a.jsxs)(a.Fragment,{children:[f,(0,a.jsx)(o.Z,{...c,id:s,anchorEl:p.current,open:m,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];d?.(...t),g(!1)},onClose:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u?.(...t),g(!1)},children:(0,a.jsx)(i.Z,{"aria-labelledby":l,children:t})})]})};var d=n(68512);let c="mobile-menu",p=e=>{let{children:t,title:n,button:o,openSheet:i,isSheetOpen:l,closeSheet:s}=e,u=(0,r.useRef)(null),[p,m]=(0,r.useState)(!1),g=i??(()=>{m(!0)}),f=l??p,h=(0,r.cloneElement)(o,{ref:u,onClick:e=>{o.props.onClick?.(e),g()},id:"mobile-menu-button","aria-haspopup":"dialog","aria-controls":f?c:void 0,"aria-expanded":f?"true":void 0});return(0,a.jsxs)(a.Fragment,{children:[h,(0,a.jsx)(d.R,{id:c,variant:"menu",isOpen:f,onClose:s??(()=>{m(!1)}),title:n,children:t})]})};var m=n(31005),g=n(87662),f=n(33175);let h=e=>{let{button:t,buttonAriaLabel:n,onlyShow:r,children:o,openSheet:i,closeSheet:l,isSheetOpen:s,...d}=e,c=t??(0,a.jsx)(m.default,{"aria-label":n,size:"medium",variant:"ghost",children:(0,a.jsx)(f.EllipsisVertical,{height:24,width:24})}),h=(0,g.Z)(e=>e.breakpoints.down("sm")),b=o({mobile:h}),v=(0,a.jsx)(p,{button:c,openSheet:i,closeSheet:l,isSheetOpen:s,children:b}),S=(0,a.jsx)(u,{button:c,...d,children:b});return"mobile"===r?h?v:null:"desktop"===r?h?null:S:h?v:S}},36285:function(e,t,n){n.d(t,{AK:function(){return o},I9:function(){return d},NX:function(){return l},X5:function(){return c},Yu:function(){return r},d9:function(){return p},o5:function(){return s},qR:function(){return u}});let a=(e,t,n)=>Math.max(t,Math.min(n,e)),r=(e,t,n,r)=>{let{startX:o,startOffset:i,width:l}=r,s=a((n-o)/l*e+i,0,e-t),u=a(s+t,t,e);return{start:s,end:u}},o=e=>.00375*e,i=e=>e/.00375,l=(e,t,n,r)=>{let o=t.end-t.start,l=e-(t.end-t.start),s=r-n,u=i(Math.abs(s)),d=a(s<0?-u:u,0,l);return{start:d,end:d+o}},s=2e4,u=(e,t)=>{let n=t<s;return{currentTime:n?0:e,ended:!1,mediaDuration:t,muted:!1,paused:n,seeking:!1,duration:t}},d=(e,t)=>void 0!==e&&48>Math.floor(t*e),c=()=>{if("undefined"==typeof document)return;let e=new Image(0,0);return e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",e},p={start:0,end:2e4}},62159:function(e,t,n){n.r(t),n.d(t,{MetadataFormProvider:function(){return c},useMetadataFormContext:function(){return p}});var a=n(97546),r=n(11563),o=n(98418),i=n(9191),l=n(2619),s=n(28768),u=n(36285);let d={albumType:"album",apiStreamable:!0,commentable:!0,description:"",downloadable:!1,embeddable:!0,explicit:!1,feedable:!0,geoBlocking:{geoBlockingValue:s.bF.Worldwide,exclusiveRegions:[],blockedRegions:[]},isrc:null,labelName:"",licensingAttribution:!1,licensingLicense:"all-rights-reserved",licensingNonCommercial:!1,licensingNonDerivatives:!1,licensingShareAlike:!1,no_offline_sync:!0,permalink:"",pLineForDisplay:null,preview:u.d9,primaryGenre:"",privacy:i.M.Public,publisher:null,purchaseUrl:null,releaseDate:void 0,revealComments:!0,revealStats:!0,tags:[],title:"",trackList:[]},c=e=>{let{children:t,defaultValues:n=d}=e,{meUser:i}=(0,l.a)(),u=(0,o.cI)({resolver:(0,r.F)(s.Kn,{},{mode:"sync"}),defaultValues:{...n,artist:i?.me?.username??""},mode:"onBlur"});return(0,a.jsx)(o.RV,{...u,children:t})},p=()=>(0,o.Gc)()},28768:function(e,t,n){n.d(t,{Kn:function(){return N},Mo:function(){return k},bF:function(){return r},ix:function(){return M},jM:function(){return P},xY:function(){return O}});var a,r,o=n(36285),i=n(9191),l=n(15926),s=n(4561),u=n(71913),d=n(91227),c=n(65115);let p=(0,u.J)(),m=/^[0-9a-z_-]+$/,g=/^([a-z\d]+)([-_][a-z\d]+)*$/,f=/\D+/,h=["albums","comments","favorites","followers","following","likes","reposts","sets","stats","tracks"],b=["new","download","favourites","reset-secret-link","widget"],v=l.z.string().or(l.z.literal("")).superRefine((e,t)=>{e&&!m.test(e)&&t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.TRACK_FORMAT}),e&&!f.test(e)&&t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.NON_DIGIT}),h.includes(e)&&t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.RESERVED})}),S=l.z.string().min(1).superRefine((e,t)=>{g.test(e)||t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.ALBUM_FORMAT}),f.test(e)||t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.NON_DIGIT}),b.includes(e)&&t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.RESERVED})}),x=l.z.string().min(1),E=l.z.string().nullable(),I=l.z.array(l.z.string()),z=l.z.string().min(0).max(4e3),y=l.z.nativeEnum(i.M),C=l.z.nativeEnum(d.FID).optional(),k=l.z.date().refine(e=>e>p),A=l.z.object({start:l.z.number(),end:l.z.number()}),R=l.z.object({downloadable:l.z.boolean().optional(),no_offline_sync:l.z.boolean().optional(),feedable:l.z.boolean().optional(),embeddable:l.z.boolean().optional(),apiStreamable:l.z.boolean().optional()}),w=l.z.object({commentable:l.z.boolean().optional(),revealComments:l.z.boolean().optional(),revealStats:l.z.boolean().optional()}),F=l.z.object({type:l.z.literal("country").or(l.z.literal("continent")),value:l.z.string().optional(),code:l.z.string().or(l.z.null()),continent:l.z.string().optional()});(a=r||(r={})).Worldwide="worldwide",a.Exclusive="exclusiveRegions",a.Blocked="blockedRegions";let U=l.z.object({geoBlockingValue:l.z.nativeEnum(r),exclusiveRegions:l.z.array(F),blockedRegions:l.z.array(F)}),j=l.z.object({title:x,trackPermalink:v.optional(),albumPermalink:S.optional(),artist:l.z.string().min(1),primaryGenre:E,tags:I,description:z.optional(),privacy:y,scheduledDate:k.optional()}),D=l.z.object({purchaseUrl:l.z.literal("").or(l.z.string().url()).or(l.z.null()).optional(),purchaseTitle:l.z.literal("").or(l.z.string()).or(l.z.null()).optional(),labelName:l.z.string().optional(),releaseDate:l.z.date().or(l.z.null()).optional(),publisher:l.z.string().or(l.z.null()).optional(),isrc:l.z.literal("").or(c.b).or(l.z.null()).optional(),explicit:l.z.boolean().optional(),pLineForDisplay:l.z.string().or(l.z.null()).optional(),licensingLicense:l.z.string().optional(),licensingAttribution:l.z.boolean().optional(),licensingNonCommercial:l.z.boolean().optional(),licensingNonDerivatives:l.z.boolean().optional(),licensingShareAlike:l.z.boolean().optional(),geoBlocking:U,accessSettings:R.optional(),engagementPrivacy:w.optional(),commentable:l.z.boolean().optional(),revealComments:l.z.boolean().optional(),revealStats:l.z.boolean().optional(),downloadable:l.z.boolean().optional(),no_offline_sync:l.z.boolean().optional(),feedable:l.z.boolean().optional(),embeddable:l.z.boolean().optional(),apiStreamable:l.z.boolean().optional(),artist:l.z.string().min(1),preview:A.optional()}),T=l.z.object({firstFansPreEnrollments:C}),L=D.merge(j).merge(T),_=l.z.object({localId:l.z.string().uuid()}).merge(L.omit({trackPermalink:!0,albumPermalink:!0})),N=l.z.object({trackList:l.z.array(_)}).merge(L),P=D.merge(l.z.object({title:x,permalink:v,primaryGenre:E,tags:I,description:z.optional(),privacy:y,scheduledDate:k.optional(),replacingUid:l.z.string().optional(),replacingOriginalFilename:l.z.string().optional()}));l.z.object({title:x,permalink:v,primaryGenre:E,tags:I,description:z.optional(),privacy:y,scheduledDate:k.optional(),purchaseUrl:l.z.literal("").or(l.z.string().url()).or(l.z.null()),purchaseTitle:l.z.literal("").or(l.z.string()).or(l.z.null()),labelName:l.z.string().optional(),albumType:l.z.string().optional(),trackList:l.z.array(_),licensingLicense:l.z.string().optional(),licensingAttribution:l.z.boolean().optional(),licensingNonCommercial:l.z.boolean().optional(),licensingNonDerivatives:l.z.boolean().optional(),licensingShareAlike:l.z.boolean().optional(),releaseDate:l.z.date().optional(),artist:l.z.string().min(1)});let M={title:"",tags:[],permalink:"",primaryGenre:"",description:"",privacy:i.M.Public,scheduledDate:void 0,downloadable:!1,commentable:!0,revealComments:!0,revealStats:!0,no_offline_sync:!0,feedable:!0,embeddable:!0,apiStreamable:!0,replacingUid:"",replacingOriginalFilename:"",licensingLicense:"",licensingAttribution:!1,licensingNonCommercial:!1,licensingNonDerivatives:!1,licensingShareAlike:!1,geoBlocking:{geoBlockingValue:"worldwide",exclusiveRegions:[],blockedRegions:[]},releaseDate:void 0,purchaseUrl:"",purchaseTitle:"",labelName:"",publisher:"",isrc:"",explicit:!1,pLineForDisplay:"",artist:"",preview:{start:o.d9.start,end:o.d9.end}},O=["artist","description","privacy","scheduledDate","tags","purchaseUrl","purchaseTitle","labelName","primaryGenre","licensingLicense","licensingAttribution","licensingNonCommercial","licensingNonDerivatives","licensingShareAlike","downloadable","embeddable","feedable","apiStreamable","no_offline_sync"]},71913:function(e,t,n){n.d(t,{J:function(){return a}});let a=()=>{let e=new Date;return e.setMinutes(e.getMinutes()+1),e}},53948:function(e,t,n){n.d(t,{$E:function(){return a.useMetadataFormContext},jM:function(){return r.jM}});var a=n(62159),r=n(28768)},4561:function(e,t,n){n.d(t,{ME:function(){return l},Xi:function(){return s},a8:function(){return r}});var a,r,o=n(66454),i=n.n(o);(a=r||(r={})).TRACK_FORMAT="TRACK_FORMAT",a.ALBUM_FORMAT="ALBUM_FORMAT",a.NON_DIGIT="NON_DIGIT",a.RESERVED="RESERVED",a.IN_USE="IN_USE",a.UNKNOWN="UNKNOWN";let l=e=>i()(e).toLowerCase().replace(/\s/g,"-").replace(/[^a-z0-9_-]+/g,"").replace(/^[_-]+|[_-]+$/g,"").replace(/([-_])[-_]+/g,"$1").replace(/^[^a-z]+$/,"$&a"),s=e=>{let t="https://soundcloud.com/";return e?.startsWith(t)?e.split(t)[1]:""}},16794:function(e,t,n){n.r(t),n.d(t,{UploadArtworkProvider:function(){return s},useUploadArtworkApi:function(){return d},useUploadArtworkState:function(){return u}});var a=n(97546),r=n(81736),o=n(85168);let i=(0,o.createContext)(null),l=(0,o.createContext)(null),s=e=>{let{children:t}=e,[n,s]=(0,o.useState)(null),{artwork:u,...d}=(0,r.i)(),c=(0,o.useMemo)(()=>({...u,hasArtwork:!!n}),[u,n]),p=(0,o.useMemo)(()=>({...d,onUploadFinish:s}),[d]);return(0,a.jsx)(i.Provider,{value:c,children:(0,a.jsx)(l.Provider,{value:p,children:t})})},u=()=>{let e=(0,o.useContext)(i);if(!e)throw Error("useUploadArtworkState must be used within UploadProvider");return e},d=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useUploadArtworkApi must be used within UploadProvider");return e}},25077:function(e,t,n){n.r(t),n.d(t,{UploadDropzoneProvider:function(){return Z},transcodeTrackFn:function(){return P},useUploadDropzoneContext:function(){return M}});var a,r,o=n(97546),i=n(85168),l=n(20573),s=n(20197),u=n(76494);n(15179);var d=(0,n(40667).$)("1a889a0cc9215fb5446f16929efa5305eb51ebb7");async function c(e){return await (0,u.y)(d(e))}var p=n(87771),m=n(81686),g=n(90855),f=n(53948),h=n(10261),b=n(58523),v=n(28768),S=n(56162),x=n(91227);let E=e=>{let{addFile:t,updateFile:n,setFormValue:a,getFormValues:r,setFileAndUpload:o,currentTrackCount:i,goToNextStep:l,addMonetizationRequest:s,meUser:u,hasUnlimitedUploads:d}=e;return async(e,c,p,m)=>{if(0===e.length)return;let f=await (0,S.v)({files:e,meUser:u,hasUnlimitedUploads:d}),h=[],E=e.length>1;if(p instanceof CustomEvent){let e=p.detail.fileIndex,t=p.detail.localId,[r]=f,o=m??r.title,{duration:i,durationDisplay:l,originalFilename:s,fileUrl:u,file:d,lossless:c,quotaUtilization:b,getHeardEligible:v,monetizationEligible:S}=r;n(t,{originalFilename:s,file:d,fileUrl:u,uploadStatus:g.Dm.requested,uploadProgress:0,duration:i,durationDisplay:l,lossless:c,quotaUtilization:b,isReplacingTrack:!0,getHeardEligible:v,monetizationEligible:S,firstFansPreEnrollments:x.FID.NOT_ENROLLED}),a(`trackList.${e}.title`,o),h.push({parsedTrack:r,localId:t,destinationIndex:e})}else f.forEach((e,n)=>{let o=i+n,l=(0,b.Z)(),u=m??e.title,{duration:d,durationDisplay:c,originalFilename:p,fileUrl:f,file:S,lossless:I,quotaUtilization:z,getHeardEligible:y,monetizationEligible:C,artist:k}=e,A=r(v.xY).reduce((e,t,n)=>(e[v.xY[n]]=t,e),{});s(l),a(`trackList.${o}`,{...v.ix,title:u,localId:l,downloadable:!1,artist:k,...A}),E||0!==o||(a("title",u),a("artist",k)),t({originalFilename:p,localId:l,file:S,fileUrl:f,uploadStatus:g.Dm.requested,uploadProgress:0,duration:d,durationDisplay:c,lossless:I,quotaUtilization:z,isReplacingTrack:!1,getHeardEligible:y,monetizationEligible:C,firstFansPreEnrollments:x.FID.NOT_ENROLLED}),h.push({parsedTrack:e,localId:l,destinationIndex:o})});l?.(),h.forEach(e=>{let{parsedTrack:t,localId:n}=e;o(n,t.file)})}};var I=n(37687),z=n(36187),y=n(2619),C=n(2689),k=n(83452),A=n(67431),R=n(36570),w=n(88554),F=n(71368);(a=r||(r={})).CorruptedFile="corrupted-file",a.FileTooLarge="file-too-large",a.FileTooSmall="file-too-small",a.MissingName="missing-name",a.UnsupportedFileType="file-type-unsupported";class U{static #e=this.ALLOWED_EXTENSIONS=["3ga","3gp","aac","aif","aifc","aiff","alac","amr","caf","flac","m4a","mp2","mp3","mp4","ogg","wav","wma"];static #t=this.ALLOWED_MIME_TYPES=["audio"];static #n=this.MAX_FILE_SIZE=4294967296;static #a=this.MIN_FILE_SIZE=0;get maxFileSize(){return U.MAX_FILE_SIZE}get minFileSize(){return U.MIN_FILE_SIZE}validate(e){let t=[];e.name||t.push("missing-name"),void 0===e.size||null===e.size?t.push("corrupted-file"):e.size>=U.MAX_FILE_SIZE?t.push("file-too-large"):e.size<=U.MIN_FILE_SIZE&&t.push("file-too-small");let[n]=e.type?.split("/")??[void 0],a=(0,F.m)(e.name);return U.ALLOWED_EXTENSIONS.includes(a)||U.ALLOWED_MIME_TYPES.includes(n)||t.push("file-type-unsupported"),[!t.length,t]}}let j=new U;var D=n(68303),T=n(73836);let L=(0,i.createContext)(null),_={[r.CorruptedFile]:e=>e.t("File type is not supported."),[r.FileTooLarge]:e=>e.t("File is too large. Max file size is 4GB."),[r.FileTooSmall]:e=>e.t("File is too small."),[r.MissingName]:e=>e.t("File type is not supported."),[r.UnsupportedFileType]:e=>e.t("File type is not supported.")},N=e=>t=>{let[n,a]=j.validate(t);return n?null:a.map(t=>({code:t,message:_[t](e)}))},P=(e,t,n)=>async(a,r)=>{t.track("Upload Step Initiated",{step_name:"Transcoding",view_type:n});try{await c(a),e(r,{uploadProgress:100,uploadStatus:g.Dm.transcodeStarted})}catch(t){e(r,{uploadStatus:g.Dm.transcodeFailed}),p.Am.error(p.El.upload.TranscodeTrackFailed)}},M=()=>{let e=(0,i.useContext)(L);if(!e)throw Error("useUploadDropzoneContext must be used within UploadDropzoneProvider");return e},O=e=>{let{children:t}=e,{getInputProps:n}=M();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{...n()}),t]})},B=()=>{let[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(0);return(0,i.useEffect)(()=>{let e=e=>{e.preventDefault(),e.stopPropagation()},a=e=>{e.preventDefault(),e.stopPropagation(),n.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&t(!0)},r=e=>{e.preventDefault(),e.stopPropagation(),n.current--,n.current>0||t(!1)},o=e=>{e.preventDefault(),e.stopPropagation(),t(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(n.current=0,e.dataTransfer.clearData())};return window.addEventListener("dragenter",a),window.addEventListener("dragleave",r),window.addEventListener("dragover",e),window.addEventListener("drop",o),function(){window.removeEventListener("dragenter",a),window.removeEventListener("dragleave",r),window.removeEventListener("dragover",e),window.removeEventListener("drop",o)}},[]),e},Z=e=>{let{children:t}=e,{isFirstStep:n,nextStep:a,reset:r}=(0,z.C)(),[,u]=(0,i.useTransition)(),{updateFile:d,addFile:c,reset:b}=(0,g.jX)(),{addRequest:v,setTrackUid:S}=(0,A.o)(),{uploadFiles:x}=(0,g.i2)(),{setValue:F,getValues:U}=(0,f.$E)(),j=(0,s.useLingua)(),_=B(),{addTask:M}=function(e){let[t,n]=(0,i.useState)({numRunning:0,tasks:[]});return(0,i.useEffect)(()=>{(async function(){if(0===t.tasks.length||3===t.numRunning)return;let[e]=t.tasks;n(e=>({numRunning:e.numRunning+1,tasks:e.tasks.slice(1)})),await e(),n(e=>({...e,numRunning:e.numRunning-1}))})()},[t,3]),{tasks:t.tasks,addTask:(0,i.useCallback)(e=>{n(t=>({...t,tasks:[...t.tasks,e]}))},[])}}(0),Z=(0,h.rS)(),V=(0,I.b)("unlimited_uploads"),{meUser:W}=(0,y.a)(),q=(0,T.S)(),G=P(d,Z,q),$=(0,m.M)({updateFile:d,transcodeTrack:G,tracking:Z,view_type:q,updateMonetizationRequestUid:S}),{onPlanPickerSeen:Q,onFreePlanSelected:H,isCheckoutModalOpen:Y,setIsCheckoutModalOpen:K,planPickerType:X}=(0,C.T)(),{isInWebView:J}=(0,D.B9)(),ee=E({addFile:c,updateFile:d,setFormValue:F,getFormValues:U,setFileAndUpload:function(e,t){M(async()=>{await new Promise(a=>{u(async()=>{try{await $(t,e)}catch(t){n?(p.Am.error(p.El.upload.UploadTrackFailed),b(),r()):d(e,{uploadStatus:g.Dm.failed,uploadProgress:0})}finally{a()}})})})},currentTrackCount:x.length,goToNextStep:function(){n&&a()},addMonetizationRequest:v,meUser:W,hasUnlimitedUploads:V});!function(e){let{isUploadInProgress:t,uploadFiles:n}=e,a=(0,w.i)(),r=i.useRef(new WeakSet);(0,i.useEffect)(()=>{let e=a.filter(e=>!r.current.has(e));e.length>0&&!t&&(n(e),R.y.pendingUploadFiles.reset(),e.forEach(e=>r.current.add(e)))},[a,t,n])}({isUploadInProgress:x.length>0,uploadFiles:e=>void ee(e,[],new Event("drop"))});let et=(0,l.uI)({useFsAccessApi:!1,noClick:!0,onDrop:(e,t,n)=>{let a="drop"===n.type;if(a&&void 0!=X){K(!0);return}ee(e,t,n);let r=e.length>0,o=t.length>0;r&&o&&p.Am.primary(j.t("Invalid files have been filtered out")),Z.track("Upload Started",{location_context:"Start Page",is_drag_n_drop:a,view_type:q})},validator:N(j),maxFiles:J?1:0,onFileDialogCancel:()=>{Z.track("Upload Canceled",{view_type:q})},onDropRejected:e=>{Z.track("Upload Failed",{reason:e[0].errors.map(e=>e.message).join(", "),view_type:q})}}),en=x.some(e=>!e.uid),ea=(0,i.useMemo)(()=>{let{acceptedFiles:e,getRootProps:t,getInputProps:n,fileRejections:a,isDragActive:r,isFocused:o,open:i}=et;return{acceptedFiles:e,getRootProps:t,getInputProps:n,fileRejections:a,isDragActive:r,addNewFiles:i,replaceFileOnTrack:async(e,t,n)=>{let a=new CustomEvent("replaceFileEvent",{detail:{fileIndex:t,localId:n}});await ee([e],[],a)},uploadRecordedFile:async(e,t)=>{await ee([e],[],new Event("drop"),t)},isFocused:o,isDragging:_,isLoading:en}},[et,en,_,ee]);return(0,o.jsxs)(L.Provider,{value:ea,children:[(0,o.jsx)(O,{children:t}),X&&(0,o.jsx)(k.B,{checkoutModalType:k.G.INLINE_PLAN_PICKER,config:{isOpen:Y,setIsOpen:K,tcode:"t500",onCheckoutClose:Q,planPickerType:X,onFreePlanSelected:H}})]})}},32292:function(e,t,n){n.d(t,{UploadFilesProvider:function(){return m},UploadStatus:function(){return r},QY:function(){return x},gO:function(){return v},fT:function(){return S},Ln:function(){return b},useUploadFilesApi:function(){return f},useUploadFilesState:function(){return g}});var a,r,o=n(97546),i=n(85168);let l=e=>1>=e.reduce((e,t)=>e+t.quotaUtilization,0);var s=n(63105),u=n(36187);(a=r||(r={})).none="none",a.queued="queued",a.requested="requested",a.uploading="uploading",a.finished="finished",a.failed="failed",a.canceled="canceled",a.uploaded="uploaded",a.transcodeStarted="transcodeStarted",a.transcodeFailed="transcodeFailed";let d=[],c=(0,i.createContext)({uploadFiles:[],isMultiTrackUpload:!1,urns:[],areTracksWithinQuota:!0}),p=(0,i.createContext)({addFile:()=>{},updateFile:()=>{},removeFile:()=>{},getFileByLocalId:()=>null,reset:()=>{},setIsInForeground:()=>void 0,setIsMultiTrackUpload:()=>void 0,setUrns:()=>void 0}),m=e=>{var t;let{children:n}=e,[a,r]=(0,i.useState)(d),[s,m]=(0,i.useState)(!1),[g,f]=(0,i.useState)([]),[v,S]=(0,i.useState)(!1),E=l(a),{resetFinishedFiles:I}=h(a,v),{reset:z}=(0,u.C)(),y=(0,i.useCallback)(e=>{r(t=>[...t,e])},[]),C=(0,i.useCallback)((e,t)=>{r(n=>{if(0===n.length||"canceled"===t.uploadStatus)return n;let a=n.findIndex(t=>t.localId===e);if(-1===a)return n;let r=n[a],o=[...n];return o[a]={...r,...t},o})},[]),k=(0,i.useCallback)(e=>a.find(t=>t.localId===e)??null,[a]),A=(0,i.useCallback)(()=>{r(d),I(),z()},[I,z]),R=(0,i.useCallback)(e=>{r(t=>t.filter(t=>t.localId!==e))},[]);(0,i.useEffect)(()=>{a.length>0&&a.every(x)&&!v&&A()},[a,v,A]),(0,i.useEffect)(()=>{!s&&a.length>1&&m(!0)},[a,s]),(0,i.useEffect)(()=>{E||a.forEach(e=>{"canceled"!==e.uploadStatus&&e.cancelUpload?.()})},[a,E]),t=()=>a.some(e=>b(e.uploadStatus)||!x(e)),(0,i.useEffect)(()=>{let e=e=>{(!t||t())&&e.preventDefault()};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t]);let w=(0,i.useMemo)(()=>({addFile:y,updateFile:C,removeFile:R,reset:A,setIsInForeground:S,getFileByLocalId:k,setIsMultiTrackUpload:m,setUrns:f}),[y,R,A,C,k,f]);return(0,o.jsx)(c.Provider,{value:{uploadFiles:a,isMultiTrackUpload:s,urns:g,areTracksWithinQuota:E},children:(0,o.jsx)(p.Provider,{value:w,children:n})})},g=()=>(0,i.useContext)(c),f=()=>(0,i.useContext)(p),h=(e,t)=>{let n=(0,i.useRef)(new Set),a=(0,s.Z)({debounce:!0});return(0,i.useEffect)(()=>{let r=!1;e.forEach(e=>{x(e)&&!n.current.has(e.localId)&&(n.current.add(e.localId),r=!0)}),r&&!t&&a()},[e,a,t]),{resetFinishedFiles:(0,i.useCallback)(()=>{n.current=new Set},[])}},b=e=>["requested","queued","uploading"].includes(e),v=e=>["failed","transcodeFailed"].includes(e.uploadStatus),S=e=>{let{uploadStatus:t}=e;return b(t)||"uploaded"===t},x=e=>{let{uploadStatus:t}=e;return"transcodeStarted"===t}},36187:function(e,t,n){n.d(t,{C:function(){return c},I:function(){return r},UploadStepProvider:function(){return d}});var a,r,o=n(97546),i=n(85168),l=n(88554);(a=r||(r={})).UPLOAD="UPLOAD",a.WAITING_FOR_FILES="WAITING_FOR_FILES",a.INFO="INFO",a.SUCCESS="SUCCESS",a.DISTRIBUTE="DISTRIBUTE";let s={UPLOAD:{previous:void 0,next:"INFO"},WAITING_FOR_FILES:{previous:void 0,next:"INFO"},INFO:{previous:"UPLOAD",next:"SUCCESS"},SUCCESS:{previous:"INFO",next:"DISTRIBUTE"},DISTRIBUTE:{previous:"SUCCESS",next:void 0}},u=(0,i.createContext)(null),d=e=>{let{children:t}=e,[n,a]=(0,i.useState)("UPLOAD"),r=(0,l.i)();(0,i.useEffect)(()=>{r.length>0&&"UPLOAD"===n&&a("WAITING_FOR_FILES")},[r,n]);let s=(0,i.useMemo)(()=>({currentStep:n,setCurrentStep:a}),[n,a]);return(0,o.jsx)(u.Provider,{value:s,children:t})},c=()=>{let e=(0,i.useContext)(u);if(!e)throw Error("useUploadSteps must be used within an UploadStepProvider");let{currentStep:t,setCurrentStep:n}=e,a=()=>{document.querySelector("#uploadHeader")?.scrollIntoView()};return{isFirstStep:!s[t].previous,currentStep:t,setCurrentStep:n,previousStep:()=>{let e=s[t].previous;e&&(n(e),a())},nextStep:()=>{let e=s[t].next;e&&(n(e),a())},reset:()=>{n("UPLOAD")}}}},90855:function(e,t,n){n.d(t,{Dm:function(){return o.UploadStatus},wf:function(){return a.useUploadArtworkApi},nT:function(){return a.useUploadArtworkState},KP:function(){return r.useUploadDropzoneContext},jX:function(){return o.useUploadFilesApi},i2:function(){return o.useUploadFilesState}}),n(97546);var a=n(16794),r=n(25077);n(67431);var o=n(32292)},81686:function(e,t,n){n.d(t,{M:function(){return c}});var a=n(94788),r=n(90855),o=n(76494);n(15179);var i=(0,n(40667).$)("36af091995a696a6e42efd38981bfed28a9a4adc");async function l(e,t){return await (0,o.y)(i(e,t))}let s=["Content-Length","Host","Expect"],u=e=>{let{uploadPolicyHeaders:t,trackFileType:n}=e,a=[["Content-Type",n]];for(let{key:e,value:n}of t)e&&n&&!s.includes(e)&&a.push([e,n]);return Object.fromEntries(a)};var d=n(87771);let c=e=>{let{updateFile:t,transcodeTrack:n,tracking:o,view_type:i,updateMonetizationRequestUid:s}=e;return async(e,c)=>{let p=await l(e.name,e.size),m=new AbortController;t(c,{uid:p.uid,uploadStatus:r.Dm.uploading,uploadProgress:0,cancelUpload:()=>{m.abort()}}),s&&s(c,p.uid);let g={onUploadProgress(e){void 0!==e.total&&t(c,{uploadProgress:Math.round(100*e.loaded/e.total)})},headers:u({uploadPolicyHeaders:p.headers,trackFileType:e.type}),signal:m.signal};o.track("Upload Step Initiated",{step_name:"Upload to S3",view_type:i}),a.Z.put(p.url,e,g).then(e=>{200===e.status&&(t(c,{uploadStatus:r.Dm.uploaded}),o.track("Upload Step Completed",{step_name:"Upload to S3",view_type:i}),n(p.uid,c))}).catch(e=>{a.Z.isCancel(e)?t(c,{uploadStatus:r.Dm.canceled}):(t(c,{uploadStatus:r.Dm.failed,uploadProgress:0}),d.Am.error(d.El.upload.FileUploadFailed))})}}},88554:function(e,t,n){n.d(t,{i:function(){return i}});var a=n(85168),r=n(62827);let o=[];function i(){return(0,a.useSyncExternalStore)(e=>r.y.pendingUploadFiles.subscribe(e),()=>r.y.pendingUploadFiles.getFiles(),()=>o)}},37687:function(e,t,n){n.d(t,{b:function(){return o}});var a=n(85168),r=n(2619);let o=e=>{let t=(0,a.useContext)(r.V);return(t.meUser?.me?.features??[]).includes(e)}},71368:function(e,t,n){n.d(t,{H:function(){return r},m:function(){return a}});let a=e=>{if(!e)return"";let t=e.split(/[\\/]/).pop();if(!t)return"";let n=t.lastIndexOf(".");return n<1?"":t.slice(n+1)},r=e=>{let t=a(e);return t?e.slice(0,-t.length-1):e}},56162:function(e,t,n){n.d(t,{i:function(){return s},v:function(){return l}});var a=n(76987),r=n(60184),o=n(71368),i=n(39150);let l=async e=>{let{files:t,meUser:n,hasUnlimitedUploads:a}=e;return await Promise.all(t.map(e=>s({file:e,meUser:n,hasUnlimitedUploads:a})))},s=async e=>{let{file:t,meUser:n,hasUnlimitedUploads:l}=e,s=!1,u=!1,d={file:t,originalFilename:t.name,fileUrl:URL.createObjectURL(t),title:(0,o.H)(t.name),duration:1,durationDisplay:(0,i.y)(1),quotaUtilization:0,lossless:!1,getHeardEligible:s,monetizationEligible:u,artist:n.me?.username??""};try{let e=await (0,r.Aj)(t,{duration:!0}),a=e.format.duration??1,o=e.common.artist??n.me?.username??"",c=0;if(u=s=a>=30&&a<=600,!l&&"number"==typeof n.me?.uploadQuota?.secondsUploaded&&"number"==typeof n.me.uploadQuota.secondsLimit&&n.me.uploadQuota.secondsUploaded>=0&&n.me.uploadQuota.secondsLimit>=0&&n.me.uploadQuota.secondsLimit>=n.me.uploadQuota.secondsUploaded){let{secondsUploaded:e,secondsLimit:t}=n.me.uploadQuota;c=a/(t-e)}return{...d,duration:a,durationDisplay:(0,i.y)(e.format.duration??1),quotaUtilization:c,lossless:e.format.lossless??!1,getHeardEligible:s,monetizationEligible:u,artist:o}}catch(e){return(0,a.Tb)(e),d}}},65115:function(e,t,n){n.d(t,{b:function(){return o}});var a=n(15926);let r=RegExp("^[A-Z]{2}[A-Z0-9]{3}[0-9]{2}[0-9]{5}$"),o=a.z.string().length(12).regex(r)},39150:function(e,t,n){n.d(t,{y:function(){return a}});function a(e){let t=Math.floor(e/3600).toString(),n=Math.floor(e%3600/60).toString(),a=Math.floor(e%60).toString().padStart(2,"0");return"0"===t?`${n}:${a}`:`${t}:${n.padStart(2,"0")}:${a}`}},9191:function(e,t,n){n.d(t,{M:function(){return r},b:function(){return i}});var a,r,o=n(91227);(a=r||(r={})).FollowersOnly="FollowersOnly",a.Public="Public",a.Private="Private",a.Scheduled="Scheduled";let i={Public:o.M0A.PUBLIC,FollowersOnly:o.M0A.PRIVATE_FOLLOWS,Private:o.M0A.PRIVATE,Scheduled:o.M0A.PRIVATE}},73836:function(e,t,n){n.d(t,{S:function(){return i}});var a,r,o=n(68303);(a=r||(r={})).generic="Generic Web",a.iosWebView="iOS Web View";let i=()=>{let{isInWebView:e}=(0,o.B9)();return e?"iOS Web View":"Generic Web"}}}]);